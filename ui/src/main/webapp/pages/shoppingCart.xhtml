<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<f:metadata>
	<f:viewParam name="userId" value="#{shoppingCartBean.userId}"></f:viewParam>
</f:metadata>

<ui:composition template="../template/template.xhtml">
	<ui:define name="content">
		<div class="container marketing style-font well" style="margin-top: 50px; height: 600px">

			<div class="row" style="margin-right: 30px; margin-left: 10px;">
				<div class="well col-md-6 ">
					<h5>Lista tutror produselor din cos :</h5>

					<br></br>
					<!-- getCartDetails().restaurantProducts}"  -->
					<ui:repeat value="#{shoppingCartBean.getUserOrderDetails()}" var="cartUser" outcome="restaurant">
						<ui:repeat value="#{cartUser.cartDetails.restaurantProducts}" var="restaurant">
							<ui:repeat value="#{restaurant.products}" var="product">
								<div id="idProductName">

									#{product.nrProducts}x <b>#{product.name}</b> (<i>#{restaurant.restaurantName}</i>)
									<div class="pull-right">
										<small>#{product.nrProducts}x <b>#{product.price}</b> RON
										</small>
									</div>
								</div>
							</ui:repeat>
						</ui:repeat>
					</ui:repeat>
					<br />
				</div>
				<div class=" col-md-2 "></div>
				<div class="well col-md-4 ">

					<div class="col-md-12">
						<p>(Add a new user to cart)</p>
						<div>
							<div class="col-md-8">
								<select class="form-control" id="selectedUser">
									<ui:repeat var="username" value="#{shoppingCartBean.remainingUsers}">
										<option value="#{username}">#{username}</option>
									</ui:repeat>
								</select>
							</div>
							<div class="col-md-2">
								<button id="addUser">AddUser</button>
							</div>
						</div>
					</div>
					<div class="col-md-12">
						<br />
						<h5>Utilizatori:</h5>
						<ui:repeat value="#{shoppingCartBean.getUserOrderDetails()}" var="item" outcome="restaurant">
							<ui:repeat value="#{item.userDetails}" var="userDetails">
								<div id="idUser">

									<b>#{userDetails.username}</b>
									<div class="pull-right">
										<small>#{userDetails.price} RON </small>
									</div>
								</div>
							</ui:repeat>
						</ui:repeat>
						<br />

						<c:set var="totalPrice" scope="session" value="#{shoppingCartBean.getCartDetails().cartSummary.totalPrice-15}" />
						<c:if test="${totalPrice lt 30}">
							<small>*Taxa livrare: 15.00 RON*</small>
						</c:if>

						<h5>
							Total: <b>#{shoppingCartBean.cartTotalPrice} RON</b>
						</h5>
					</div>
				</div>

				<div class="">
					<div class="col-md-8 col-sm-8">
						<div class="panel panel-default arrow left">
							<div class="panel-body">
								<header class="text-left">
								<div class="comment-user">
									<i class="fa fa-user"></i> That Guy
								</div>
								<time class="comment-date" datetime="16-12-2014 01:05"> <i class="fa fa-clock-o"></i> Dec 16, 2014</time> </header>
								<div class="comment-post">
									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et
										dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
										commodo consequat.</p>
								</div>
							</div>
						</div>
					</div>

					<div class="col-lg-8">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="..." /> <span class="input-group-btn">
								<button class="btn btn-default" type="button">Send</button>
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</ui:define>
</ui:composition>
</html>
