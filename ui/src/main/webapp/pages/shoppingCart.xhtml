<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

<f:metadata>
	<f:viewParam name="userId" value="#{shoppingCartBean.userId}"></f:viewParam>
</f:metadata>

<ui:composition template="../template/template.xhtml">
	<ui:define name="content">
		<div class="container marketing style-font well" style="margin-top: 50px; height: 600px">

			<div class="row" style="margin-right: 30px; margin-left: 10px;">
				<div class="col-md-7">
					<h:form>

						<div class="output-group col-md-12 mb-3">
							<br></br>
							<div class="output" id="basic-addon1">
								<h:outputText value="Utilizator: "></h:outputText>
								<h:outputLabel value="#{sessionBean.username}">
								</h:outputLabel>
							</div>
							<br />
						</div>
						<div>
							<div class="col-md-5 mb-3">
								<h:outputText value="Nume: "></h:outputText>
								<h:inputText type="text" class="form-control user-first-name" id="firstName"
									value="#{shoppingCartBean.firstName}">
									<f:validateRequired />
								</h:inputText>
							</div>

							<div class="col-md-5 mb-3">
								<h:outputText value="Prenume: "></h:outputText>
								<h:inputText type="text" class="form-control user-last-name" id="lastName" value="#{shoppingCartBean.lastName}"
									required="true" />

							</div>
						</div>

						<div>
							<br />
							<div class="col-md-5 mb-6">
								<h:outputText value="Email:  "></h:outputText>
								<h:inputText type="text" class="form-control user-email" id="email" value="#{shoppingCartBean.email}"
									required="true" />
							</div>

							<div class="col-md-5 mb-6">
								<h:outputText value="Telefon:  "></h:outputText>
								<h:inputText type="text" class="form-control user-telephone" id="telefon" value="#{shoppingCartBean.telephone}"
									required="true" />
							</div>
						</div>
						<div>
							<br />
							<div class="col-md-10 mb-6">
								<h:outputText value="Adresa:  "></h:outputText>
								<h:inputText type="text" class="form-control user-address" id="adresa" value="#{shoppingCartBean.address}"
									required="true" />
							</div>
						</div>
						<div class="col-md-10 mb-6">
							<br></br>
							<h:form>
								<h:outputText value="Plata:  "></h:outputText>
								<!-- <h:selectOneRadio value="#{shoppingCartBean.payment}" layout="pageDirection" class="user-payment">
									<f:selectItem itemValue=" Ramburs " itemLabel=" Ramburs" class="user-payment" />
									<f:selectItem itemValue=" Card debit " itemLabel=" Card debit" class="user-payment" />
									<f:selectItem itemValue=" Card credit " itemLabel=" Card credit" class="user-payment" />
									<f:ajax execute="@form" listener="#{shoppingCartBean.checkout()}" render="@form" />
								</h:selectOneRadio> -->

								<h:selectOneRadio value="#{shoppingCartBean.payment}" layout="pageDirection">
									<f:selectItems value="#{shoppingCartBean.paymentList}" class="user-payment" var="value" itemLabel="#{value}"
										itemValue="{value}" />
								</h:selectOneRadio>
							</h:form>
						</div>

						<div class="col-md-10 mb-6">
							<br />
							<p id="cart-validation-message" style="color: #FF0000" />
						</div>
						<div class="col-md-6 mb-6" id="validate-cart">
							<br />
							<h:form>
								<h:commandButton id="sendCart" class="btn btn-primary send-cart-details" type="submit" value="Trimite comanda"
									required="true" />
						
							</h:form>
						</div>
					</h:form>
				</div>

				<div class="well col-md-5 ">
					<h5>Lista produse:</h5>
					<br></br>
					<ui:repeat value="#{shoppingCartBean.getCartDetails().restaurantProducts}" var="restaurant" outcome="restaurant">
						<ui:repeat value="#{restaurant.products}" var="product">
							<div id="idProductName">

								#{product.nrProducts}x <b>#{product.name}</b> (<i>#{restaurant.restaurantName}</i>)
								<div class="pull-right">
									<small>#{product.nrProducts}x <b>#{product.price}</b> RON
									</small>
								</div>
							</div>
						</ui:repeat>
					</ui:repeat>
					<br />

					<c:set var="totalPrice" scope="session" value="#{shoppingCartBean.getCartDetails().cartSummary.totalPrice-15}" />
					<c:if test="${totalPrice lt 30}">
						<small>*Taxa livrare: 15.00 RON*</small>
					</c:if>

					<h5>
						Total: <b>#{shoppingCartBean.getCartDetails().cartSummary.totalPrice} RON</b>
					</h5>
				</div>
			</div>
		</div>
	</ui:define>
</ui:composition>
</html>
